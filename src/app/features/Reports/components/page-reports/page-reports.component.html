<app-header></app-header>

<main>
  <mat-card class="content-report">
    <mat-card-content>
      <span>Reportes de clientes</span>
      <br /><br />

      <div style="display: flex; flex-direction: column;">
        <!-- Selector tipo de consulta -->
        <mat-form-field appearance="outline">
          <mat-label>Tipo de cliente</mat-label>
          <mat-select [(ngModel)]="tipoConsulta">
            <mat-option value="actuales">Clientes VIP actuales</mat-option>
            <mat-option value="alta">Clientes que pasaron a ser VIP</mat-option>
            <mat-option value="baja">Clientes que dejaron de ser VIP</mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Selectores A침o y Mes (solo para alta y baja) -->
        <div style="display: flex" *ngIf="tipoConsulta !== 'actuales'">
          <mat-form-field appearance="outline">
            <mat-label>A침o</mat-label>
            <mat-select [(ngModel)]="anioSeleccionado">
              <mat-option *ngFor="let anio of anios" [value]="anio.value">
                {{ anio.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" style="margin-left: 1rem;">
            <mat-label>Mes</mat-label>
            <mat-select [(ngModel)]="mesSeleccionado">
              <mat-option *ngFor="let mes of meses" [value]="mes.value">
                {{ mes.viewValue }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <!-- Bot칩n -->
        <button mat-fab extended (click)="generarReporte()" style="margin-top: 1rem;">
          Generar Reporte
        </button>

        <br /><br />
        <span style="margin-bottom: 20px;">Clientes VIP</span>

        <mat-list role="list">
          <mat-list-item *ngFor="let cliente of clientes" role="listitem" style="margin-bottom: 10px;">
            <div style="display: flex; flex-direction: column;">
              <span class="nombre">{{ cliente.nombre }}</span>
              <span class="email">{{ cliente.email }}</span>
              <span *ngIf="cliente.fecha_alta">VIP desde: {{ cliente.fecha_alta | date: 'dd/MM/yyyy' }}</span>
              <span *ngIf="cliente.fecha_baja">Dej칩 de ser VIP: {{ cliente.fecha_baja | date: 'dd/MM/yyyy' }}</span>
            </div>
          </mat-list-item>
        </mat-list>
      </div>
    </mat-card-content>
  </mat-card>
</main>
